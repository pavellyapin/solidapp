<div fxLayoutGap="50px" fxLayout="column">
    <div></div>
    <div fxLayout="column" fxLayoutGap="15px">
            <div fxLayout = "row">
                    <h2 fxFlex = "50" class="mat-h2" >{{ 'profile.address.primary' | translate }}</h2>
                    <div fxFlex = "50" 
                        fxLayoutAlign="end"
                        (click) = "addMode = !addMode ;" 
                        class="mat-caption doo-pointer">
                        {{ addMode ? ('profile.buttons.close' | translate ) : userAddressInfo ? ('profile.buttons.edit' | translate ) : ('profile.buttons.add' | translate ) }}
                    </div>
            </div>
          <div fxLayout = "row">
            <div *ngIf = "!addMode && !userAddressInfo" fxLayout = "row" fxFlex = "100" class = "doo-bottom-border">
                <div>
                    {{ 'profile.address.noAddressSaved' | translate }}
                </div>
            </div>
            <div *ngIf = "!addMode && userAddressInfo" fxLayout = "row" fxFlex = "100" class = "doo-bottom-border">
                    <mat-icon color = "accent">location_on</mat-icon>
                    <div class="add-field-placeholder" >
                            {{userAddressInfo.addressLine2 ? userAddressInfo.addressLine2 + ' - ' : userAddressInfo.addressLine2  }} {{userAddressInfo.addressLine1}}
                        <br>
                        {{userAddressInfo.city + ' ' + userAddressInfo.province + ' ' + userAddressInfo.postal}}
                    </div>
            </div>
            <div *ngIf = "addMode" fxFlex = "70"> 
                    <address-autocomplete-input
                        (setAddress)="getAddress($event)" 
                         adressType="geocode">
                    </address-autocomplete-input> 
            </div>
        </div>
        <div *ngIf = "addMode && userAddressInfo" fxLayout = "row" fxFlex = "100" class = "doo-bottom-border">
                <mat-icon color = "accent">location_on</mat-icon>
                <div class="add-field-placeholder" >
                        {{userAddressInfo.addressLine2 ? userAddressInfo.addressLine2 + ' - ' : userAddressInfo.addressLine2  }} {{userAddressInfo.addressLine1}}
                    <br>
                    {{userAddressInfo.city + ' ' + userAddressInfo.province + ' ' + userAddressInfo.postal}}
                </div>
        </div>
        <div fxLayout = "row" 
            *ngIf = "!addManually && addMode"
            (click) = "addManually = !addManually" 
            class = "manual-add-btn doo-pointer">
                <mat-icon color = "accent">add_circle_outline</mat-icon>
                <div class="mat-caption">
                    <span>
                            {{ 'profile.address.enterAddressManually' | translate }}
                    </span>
                </div>
        </div>
        <div *ngIf = "addManually && addMode" fxLayout = "row" >
                <form [formGroup]="addressInfo" 
                    fxFlex = "70">
                    <mat-form-field appearance="outline" class="full-width">
                       <input  formControlName="addressLine1" 
                                autocomplete="addressLine1" 
                                matInput 
                                name="{{ 'profile.address.addressLine1' | translate }}" 
                                placeholder="Street address"
                                type="text"/>
                    </mat-form-field>
                    <div fxLayout = "row" 
                        *ngIf = "!userAddressInfo?.addressLine2"
                        (click) = "addAddressLine2 = !addAddressLine2" 
                        class = "manual-add-btn doo-pointer">
                            <mat-icon>add_circle_outline</mat-icon>
                            <div class="mat-caption">
                                <span>
                                        {{ 'profile.address.addAddressLine2' | translate }}
                                </span>
                            </div>
                    </div>                    
                    <mat-form-field *ngIf = "userAddressInfo?.addressLine2 || addAddressLine2" appearance="outline" class="full-width">
                        <input  formControlName="addressLine2" 
                                autocomplete="addressLine2" 
                                matInput 
                                name="addressLine2" 
                                placeholder="{{ 'profile.address.addressLine2' | translate }}"
                                type="text"/>
                    </mat-form-field>
                    <mat-form-field appearance="outline" class="full-width">
                        <input  formControlName="city" 
                                autocomplete="city" 
                                matInput 
                                name="city" 
                                placeholder="{{ 'profile.address.city' | translate }}"
                                type="text"/>
                    </mat-form-field>
                    <mat-form-field appearance="outline" class="full-width">
                        <mat-select formControlName="province" 
                                name="province" 
                                placeholder="{{ 'profile.address.province' | translate }}">
                                <mat-option *ngFor="let item of provinces" [value]="item.value">
                                        {{item.viewValue}}
                                </mat-option>
                        </mat-select>
                    </mat-form-field>
                    <mat-form-field appearance="outline" class="full-width">
                        <input  formControlName="postal" 
                                autocomplete="postal" 
                                matInput 
                                name="postal" 
                                placeholder="{{ 'profile.address.postal' | translate }}"
                                type="text"/>
                    </mat-form-field>
                </form>
            </div>
            <div fxLayout = "row"
                 *ngIf = "addMode">
                 <div fxLayoutGap="20px"
                      fxLayout = "column"
                      fxFlex = "70">
                    <button (click)="saveAddress()" class="full-width"
                            color="primary" mat-raised-button type="submit">
                            {{ 'profile.buttons.save' | translate }}
                    </button>   
                    
                    
                    <button (click) = "addManually = !addManually" class="full-width"
                            color="primary" mat-stroked-button>
                            {{ 'profile.buttons.cancel' | translate }}
                    </button>
                 </div>

            </div>
    </div>
</div>