
<div [formGroup]="paymentMethodForm" fxLayout = "row" fxLayoutAlign = "center" class = "doo-cart-payment">
<div fxLayout = "column" fxFlex = "80" fxLayoutAlign = "center" fxLayoutGap = "20px">
    <div></div>
                <div fxLayout = "column" class = "doo-shipping-box" fxLayoutGap="5px">

                        <div fxLayout = "row">
                                <mat-icon svgIcon="doo-location" color = "accent"></mat-icon>
                                <div fxLayout = "column" fxLayoutGap="5px">
                                    <span class = "mat-caption doo-letter-space">
                                        Shipping Details
                                     </span>
                                        <div class="add-field-placeholder" >
                                                {{userInfo.firstName.length > 0 || userInfo.lastName.length > 0 ? userInfo.firstName + ' ' + userInfo.lastName  : 'profile.account.addName' | translate}}
                                        </div>                                
                                        <div *ngIf = "!userAddressInfo" fxLayout = "row" fxFlex = "100">
                                                
                                        <div class="add-field-placeholder">
                                                {{ 'profile.address.noAddressSaved' | translate }}
                                        </div>
                                        </div>
                                        <div *ngIf = "userAddressInfo" fxLayout = "row" fxFlex = "100">
                                                <div class="add-field-placeholder" >
                                                        {{userAddressInfo.addressLine2 ? userAddressInfo.addressLine2 + ' - ' : 
                                                        userAddressInfo.addressLine2 }} 
                                                        {{userAddressInfo.addressLine1}}
                                                <br>
                                                {{userAddressInfo.city + ' ' + userAddressInfo.province + ' ' + userAddressInfo.postal}}
                                                </div>
                                        </div>
                                </div>
                                <div fxFlex fxLayout = "row" fxLayoutAlign="end">
                                                <div (click) = "backToAddress()" 
                                                     class="mat-caption doo-pointer doo-undeline">
                                                    {{ 'profile.buttons.edit' | translate }}
                                                </div>
                                        </div>
                            </div>
                </div>
    <mat-radio-group fxLayout="row" 
    formControlName="method">
    <mat-accordion>
            <mat-expansion-panel [hideToggle] = "true" 
                                 [disabled] = "true"
                                 [expanded] = "paymentMethodForm.controls['method'].value == 'cc'"
                                 [ngClass] = "paymentMethodForm.controls['method'].value == 'cc' ? 'selected-method mat-elevation-z5' : 'mat-elevation-z0'">
              <mat-expansion-panel-header class = "doo-pointer" (click) = "paymentMethodForm.controls['method'].setValue('cc')">
                <mat-panel-title>
                    <div fxLayout = "row" fxFlex fxLayoutAlign = "start center" fxLayoutGap = "10px">
                        <mat-radio-button [value]="'cc'">
                        </mat-radio-button>
                        <div fxFlex fxLayoutAlign = "start center" class = "doo-letter-space">
                          <div>Pay with Credit or Debit Card</div> 
                          <div fxFlex fxLayoutAlign = "end">
                              <mat-icon svgIcon="doo-cc"></mat-icon>
                          </div>
                        </div>
                            
                    </div>
                </mat-panel-title>
              </mat-expansion-panel-header>
              <form fxLayout = "row" fxLayoutAlign = "center" #checkout="ngForm" class="checkout">
                    <div fxLayout = "column" fxLayoutGap = "10px" fxFlex>
                      <span class = "mat-caption doo-letter-space">We accept all major credit and debit cards.</span>
                      <div fxLayout = "row" class = "accepted-cards" fxLayoutGap = "10px">
                          <mat-icon svgIcon="doo-visa"></mat-icon>
                          <mat-icon svgIcon="doo-mastercard"></mat-icon>
                          <mat-icon svgIcon="doo-amex"></mat-icon>
                          <mat-icon svgIcon="doo-discover"></mat-icon>
                      </div>
                        
                            <div class="cell example example2" id="example-2">
                            <div class="row">
                                    <div class="field">
                                      <div id="example2-card-number" class="input empty"></div>
                                      <label for="example2-card-number" data-tid="elements_examples.form.card_number_label">Card number</label>
                                      <div class="baseline"></div>
                                    </div>
                                  </div>
                                  <div class="row">
                                    <div class="field half-width">
                                      <div id="example2-card-expiry" class="input empty"></div>
                                      <label for="example2-card-expiry" data-tid="elements_examples.form.card_expiry_label">Expiration</label>
                                      <div class="baseline"></div>
                                    </div>
                                    <div class="field half-width">
                                      <div id="example2-card-cvc" class="input empty"></div>
                                      <label for="example2-card-cvc" data-tid="elements_examples.form.card_cvc_label">CVC</label>
                                      <div class="baseline"></div>
                                    </div>
                                  </div>
                      <div id="card-errors" role="alert" *ngIf="error">{{ error }}</div>
                      </div>
                      <div fxLayout="column"  fxLayoutAlign="end" style = "padding-top: 50px;">
                            <button color = "primary" 
                                    mat-flat-button 
                                    class = "doo-checkout-btn"
                                    (click) = "onSubmit()">
                                    PLACE ORDER
                            </button>
                    </div>
                    </div>
    
            </form>
            </mat-expansion-panel>
            <mat-expansion-panel [hideToggle] = "true"
                                 [disabled] = "true" 
                                 [expanded] = "paymentMethodForm.controls['method'].value == 'paypal'" 
                                 [ngClass] = "paymentMethodForm.controls['method'].value == 'paypal' ? 'selected-method mat-elevation-z5' : 'mat-elevation-z0'">
              <mat-expansion-panel-header class = "doo-pointer" (click) = "paymentMethodForm.controls['method'].setValue('paypal')">
                <mat-panel-title>
                        <div fxLayout = "row" fxLayoutAlign = "start center" fxLayoutGap = "10px">
                            <mat-radio-button [value]="'paypal'">
                              </mat-radio-button>
                              <span style = "font-weight: 700" class = "doo-letter-space">PayPal</span>
                        </div>
                </mat-panel-title>
                </mat-expansion-panel-header>
                <div fxLayout = "column" fxLayoutGap = "20px">
                    <div></div>
                    <div fxLayout = "row" fxLayoutGap = "30px">
                        <div fxLayout = "column"  fxFlex = "50">
                            <span class = "mat-subheading-2">
                                Pay with PayPal no problem
                            </span>
                            <span class = "mat-caption">
                                You can add the items you want and pay using your paypal account, it will be super smooth and you will land back here.
                            </span>

                        </div>
                            <div fxLayout = "column" fxLayoutAlign = "center center">
                                    <button (click) = "payPalPay()" color = "accent" 
                                            style = "padding-top: 5px;"
                                            mat-stroked-button>
                                            <mat-icon fxFlex = "25" 
                                                    svgIcon="paypal" 
                                                    inline="true"></mat-icon>
                                    </button>
                                </div>
                    </div>
                </div>
            </mat-expansion-panel>
          </mat-accordion>
          </mat-radio-group>
</div>
</div>

